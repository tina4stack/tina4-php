====== Troubleshooting ORM returning null ======

Sometimes you may get no data back from an [[tina4:tutorials:query-database|ORM query]]. You'll see an error like this one below stating that there was no data returned.

<code html>
/vendor/twig/twig/src/Extension/DebugExtension.php:59:
array (size=0)
  empty
</code>

**So how do we resolve this?**

===== Step 1 =====
Check the terminal for any queries or output for **errors**.

<WRAP center info>
You will put the output in this directory:
**src/templates/import/matchimport.twig**
</WRAP>

And it should look something like this: 

<code bash>
[Thu Mar 25 16:25:19 2021] INFO:Adding DBA
[Thu Mar 25 16:25:19 2021] DEBUG:SQL:
select  *
from    match t
</code>

===== Step 2 =====
If your ORM query returns no data try running the query using a database client like [[https://github.com/dbeaver/dbeaver/wiki|DB-Beaver]] or [[https://www.phpmyadmin.net/|PhpMyAdmin]].

<code>
select "*"
from "id t"
where "id t = user";
</code>

===== Step 3 =====
Retrace your steps.

To get data from an [[tina4:tutorials:advanced:save-a-record-with-orm|ORM object]] you need the following files:

**Define an ORM Class (Model)**

<WRAP center info>
The directory should be something like:
**./src/orm/Match.php**
</WRAP>

<code php Match.php>
<?php

class Match extends \Tina4\ORM
{
    public $tableName="match";
    public $primaryKey="match_key"; //set for primary key
}
</code>

**a Template file (View)**

<WRAP center info>
The directory should be something like:
**./src/orm/Match.php**
</WRAP>

<WRAP center info>
Our twig template located in the project and looks similar to:
**./src/templates/match.twig**
</WRAP>

<code twig match.twig>
{% set match = Tina4.call("MatchHelper","getMatch",[request.id]) %}
{{ dump(match) }}
</code>

**Controller**
<code php MatchHelper.php>
<?php
// if you want your class to extend to a different Helper or Database
class MatchHelper extends \Tina4\Data 
{
  public function getMatch($id) //no data yet
    {
        $match=(new OldMatch())->select("*",1,0)
                               ->where("match_key = {$id}")
                               ->asArray();                        
    return $match;
    }
}
</code>

A **Route** is preferable but Tina4 will read your template file by name in the absence of a route matching your url query.

<WRAP tip center>
http://localhost:8383/match.php should reach your template file if it's located in the templates directory (not a subdirectory of it).
</WRAP>

===== Step 4 =====
Consider reserved words. In the case above **match** is a [[https://dev.mysql.com/doc/refman/8.0/en/keywords.html|reseved word in MySQL]]

<WRAP center round important>
Avoid Reserved words. If you inherit a database with tables that have reserved words for names you should change the names of those tables. In the case tthat you add a Reserved Word, for example the word name, then ensure to use back-ticks before and after the word e.g. **`name`**. 
</WRAP>

==== As a short term workaround ====
You can use tildes around the table name using the fetch method:

<code php>
$match=$this->DBA->fetch("select * from `match`")
                 ->asArray();
</code>
