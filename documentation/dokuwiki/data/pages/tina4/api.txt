====== Creating API's With Tina4 ======
\\
{{url>https://www.youtube.com/embed?v=LP5hVFh2lDQ&t=1s | 560,315 noscroll noborder centred}Creating API's With Tina4}}
\\
\\
Follow the steps below if you need to create an API end point to define the interactions between multiple software. This will be required as your application, system or webpage will require multiple interactive systems communicating with each other. Your API will provide the instructions on how these systems interact with each other. It handles things just as your HTTP requests, web applications, information and specifications. 

<WRAP center round info>
**Please Note** : After installing Tina4, you may delete the test.php file located inside the api folder. 
</WRAP>

The [[https://www.sitepoint.com/rest-api/|REST end point]] is easily added, with an anonymous method to handle the request, the anonymous method should have the response variable.

The request exposes more information which comes from the browser, in the case of parameters passed to it. You should always return the **$response** object!

====== Step 1 - Create API file & sub-directories ======
   
All your API's must be stored in the API directory. For this example we will make the files and sub-directories for "cars" and "characters". 

Create 2 directories inside the API folder and name it "cars" and "characters". Now create php files inside those sub-directories (eg. name the file cars and the other characters).

====== Step 2 - Define routes ======

Now that the API files has been created, we must define our Routes. There are various methods which can be used.  

It is **IMPORTANT** to ensure that the paths are correct:

<code php>
"/api/characters"
</code>

<WRAP center round info>
To know more about Routing go to the [[tina4:routing|Routing]] page.
</WRAP>

=== Get Method ===

This is how to create a Get route with a response and request using TIna4. 

<code php>
<?php
\Tina4\Get::add("/api/cars", function (\Tina4\Response $response, \Tina4\Request $request) {

    $cars = ["Rolls Royce", "Aston Martin", "Bugatti"];

return $response ($cars, HTTP_OK, APPLICATION_JSON);
});
</code>

=== Post Method ===

This is how to create a Post route with a response and request using TIna4. 

<code php>
<?php
\Tina4\Post::add("/api/characters", function (\Tina4\Response $response, \Tina4\Request $request) {
    $characters = ["Clancy Gilroy", "Peter Griffin", "Broden Kelly"];
return $response ($characters, HTTP_OK, APPLICATION_JSON);
});
</code> 

=== Other Routes Methods ===

Other methods you may need to use include: 

<code php>
<?php
//Other methods you can test
\Tina4\Post::add(...);

\Tina4\Patch::add(...);

\Tina4\Put::add(...);

\Tina4\Delete::add(...);

//You guessed it - It takes every method - GET, POST, DELETE, PUT, PATCH, OPTIONS
\Tina4\Any::add(...);
</code>

====== Step 3 - Annotate API ======
It is useful to add comments to your scripts for future use (e.g. if someone else has to work on your code). Now we will need to annotate the end point we created. This will be a description of the end point which will be used in Swagger. Its as easy as adding the following lines above the end point you created:

<code php>
<?php
/**
* @description My first API
* @summary Returns list of cars
* @tags Cars
*/
\Tina4\Get::add("/api/cars", function (\Tina4\Response $response, \Tina4\Request $request) {

    $cars = ["Rolls Royce", "Aston Martin", "Bugatti"];

return $response ($cars, HTTP_OK, APPLICATION_JSON);
});
</code>

====== Step 4  Test API ======

Now we can test to check if our API is working. Spin up a web server by running this in your IDE terminal or command line:
<code bash>
composer start
</code>

Now that the web server is running, add "/swagger" to the URL:

{{  :tina4:api2.png?nolink&0x40  }}

A Swagger page will load and you will see the following which will include the data and annotations within the script created: 

{{  :tina4:api3.png?nolink&0x200 }}

Next click on the API and then click on "Try It Out" button:

{{  :tina4:api4.png?nolink&0x41  }}

Thereafter, click on the execute button and you will see the following responses in the browser:
== Get Method Result ==
{{  tina4:api5.png?nolink&x0400  }}
== Post Method Result ==        
{{  :tina4:api6.png?nolink&0x400  }}    
\\
\\
You just created a basic API using Tina4. You are on your way to becoming a serious Code Ninja or Kunoichi. Please reach out to the developers if you have any questions or suggestions. 
\\
<WRAP center round info>
For more information on API's please look at [[https://www.freecodecamp.org/news/what-is-an-api-in-english-please-b880a3214a82/ | FreeCodeCamp]] or [[https://www.howtogeek.com/343877/what-is-an-api/ | HowToGeek]]
</WRAP>
                                  