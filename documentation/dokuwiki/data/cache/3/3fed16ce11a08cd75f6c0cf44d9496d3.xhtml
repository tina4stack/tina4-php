
<h1 class="sectionedit1 heading-combo" id="database_in_tina4">Database in Tina4</h1>
<div class="level1">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Database in Tina4&quot;,&quot;hid&quot;:&quot;database_in_tina4&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-33&quot;} -->
<h2 class="sectionedit2 heading-combo" id="connecting_to_a_database">Connecting to a Database</h2>
<div class="level2">

<p>
For more dynamic websites, there is a strong chance a <strong>Database</strong> will be required. Tina4 currently supports 3 database types:
</p>

<p>
The database connection is established in a global variable called <strong>$DBA</strong> in the index.php file for convenience, you could put it anywhere as long as it is global and required before any database functionality is required. For testing purpose, you can use the SQLite database type below.
</p>
<ul>
<li class="level1"><div class="li"> <strong><a class="link-internal link-combo" data-wiki-id="tina4:database:mysql" href="/doku.php?id=tina4:database:mysql" title="Connecting to Mysql">Connect to Mysql</a></strong></div>
</li>
<li class="level1"><div class="li"> <strong><a class="link-internal link-combo" data-wiki-id="tina4:database:firebird" href="/doku.php?id=tina4:database:firebird" title="Connecting to Firebird">Connect to Firebird</a></strong></div>
</li>
<li class="level1"><div class="li"> <strong><a class="link-internal link-combo" data-wiki-id="tina4:database:sqlite" href="/doku.php?id=tina4:database:sqlite" title="Connecting to a Sqlite">Connect to Sqlite</a></strong></div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Connecting to a Database&quot;,&quot;hid&quot;:&quot;connecting_to_a_database&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;34-649&quot;} -->
<h2 class="sectionedit3 heading-combo" id="query_a_database_in_tina4">Query a Database in Tina4</h2>
<div class="level2">

<p>
Here&#039;s a quick way to query a database in Tina4. 
</p>

<p>
Create a class in a new file in the app directory
I.e. MyClass.php
</p>
<pre class="code-container-combo code-container-php-combo" data-download-link="true" data-src="file.php">
<code class="language-php code-combo code-php-combo">
&lt;?php 

class MyClassHelper extends \Tina4\Data 
{
    public function getEvent($variable)
    {
        $event = $this-&gt;$DBA-&gt;select(&quot;*&quot;) 
                           -&gt;from(&quot;table_name&quot;)
                           -&gt;where(&quot;column_name = {$variable}&quot;)
                           -&gt;exclude(&quot;id&quot;)
                           });
        //$DBA is made available because we extended\Tina4\Data

        return $event;
    }
}</code>
</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Query a Database in Tina4&quot;,&quot;hid&quot;:&quot;query_a_database_in_tina4&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;650-1249&quot;} -->
<h3 class="sectionedit4 heading-combo" id="summary">Summary</h3>
<div class="level3">
<ol>
<li class="level1"><div class="li"> We&#039;re extending the  <strong>\Tina4\Data</strong> class which already has access to the database</div>
</li>
<li class="level1"><div class="li"> Note we&#039;ve included <strong>\Tina4 in front</strong> of the class name (so we don&#039;t need to declare the Tina4 namespace in our file)</div>
</li>
<li class="level1"><div class="li"> From here we can use the built-in Tina4 functions to <strong><a class="link-internal link-combo" data-wiki-id="tina4:tutorials:query-database" href="/doku.php?id=tina4:tutorials:query-database" title="Query the database for some records">create a query a database for some records</a></strong> or checkout <strong><a class="link-external link-combo" href="https://github.com/andrevanzuydam/tina4-php/blob/master/Tina4/Database/SQL.php" rel="noopener" target="target=_blank">GitHub \Tina4\SQL</a></strong>.</div>
</li>
</ol>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Summary&quot;,&quot;hid&quot;:&quot;summary&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:4,&quot;range&quot;:&quot;1250-1739&quot;} -->
<h2 class="sectionedit5 heading-combo" id="how_can_the_select_method_be_used">How can the select method be used?</h2>
<div class="level2">

<p>
Have a look at the select function from <strong><a class="link-external link-combo" href="https://github.com/andrevanzuydam/tina4-php/blob/master/Tina4/Database/DatabaseCore.php" rel="noopener" target="target=_blank">\Tina4\Database</a></strong>:
</p>
<pre class="code-container-combo code-container-php-combo" data-download-link="true" data-src="file.php">
<code class="language-php code-combo code-php-combo">
public function select($fields = &quot;*&quot;, $limit = 10, $offset = 0, 
$hasOne = [], $hasMany = [])</code>
</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;How can the select method be used?&quot;,&quot;hid&quot;:&quot;how_can_the_select_method_be_used&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:5,&quot;range&quot;:&quot;1740-2054&quot;} -->
<h3 class="sectionedit6 heading-combo" id="fields">Fields</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Specify “*” or multiple fields.</div>
</li>
</ul>
<pre class="code-container-combo code-container-php-combo" data-download-link="true" data-src="file.php">
<code class="language-php code-combo code-php-combo">
 -&gt;select(&quot;*&quot;) </code>
</pre>
<pre class="code-container-combo code-container-php-combo" data-download-link="true" data-src="file.php">
<code class="language-php code-combo code-php-combo">
 -&gt;select(&quot;name,id&quot;) </code>
</pre>
<ul>
<li class="level1"><div class="li"> limit the records returned (default 10), </div>
</li>
</ul>
<pre class="code-container-combo code-container-php-combo" data-download-link="true" data-src="file.php">
<code class="language-php code-combo code-php-combo">
 -&gt;select(&quot;name,id&quot;,1) </code>
</pre>
<ul>
<li class="level1"><div class="li"> specify an offset (null based) so 3 would return from results from the 4th record, </div>
</li>
</ul>
<pre class="code-container-combo code-container-php-combo" data-download-link="true" data-src="file.php">
<code class="language-php code-combo code-php-combo">
 -&gt;select(&quot;name,id&quot;,1,3) </code>
</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Fields&quot;,&quot;hid&quot;:&quot;fields&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:6,&quot;range&quot;:&quot;2055-2401&quot;} -->
<h2 class="sectionedit7 heading-combo" id="using_hasone_hasmany">Using hasOne / hasMany</h2>
<div class="level2">
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;secid&quot;:8,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_center wrap_round wrap_important plugin_wrap">
<p>
This is a new feature on the 2.0.0 Dev Branch. You can only use it on one of your related tables at a time at present. I.e. using hasMany/hasOne on both the Users and Privileges ORM object will result in a circular reference. This issue will be fixed as this version of Tina4 heads for general release.  
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;secid&quot;:9,&quot;range&quot;:&quot;0-&quot;} -->
<pre class="code-container-combo code-container-php-combo" data-download-link="true" data-src="hasMany.php" data-download-link-label="Download hasMany.php">
<code class="language-php code-combo code-php-combo">
&lt;?php
class Users extends \Tina4\ORM
{
    public $tableName=&quot;users&quot;; //table name
    public $primaryKey=&quot;user_id&quot;; //set for primary key

    // public $hasMany = [[&quot;privileges&quot; =&gt; &quot;privelege_id&quot;]];
}</code>
</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Using hasOne \/ hasMany&quot;,&quot;hid&quot;:&quot;using_hasone_hasmany&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:7,&quot;range&quot;:&quot;2402-&quot;} -->