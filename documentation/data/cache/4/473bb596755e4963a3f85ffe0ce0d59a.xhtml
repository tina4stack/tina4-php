
<h1 class="sectionedit1 heading-combo" id="troubleshooting_orm_returning_null">Troubleshooting ORM returning null</h1>
<div class="level1">

<p>
Sometimes you may get no data back from an <a class="link-internal low-quality-page-combo link-combo" data-wiki-id="tina4:tutorials:query-database" href="/doku.php?id=tina4:tutorials:query-database" title="What if you wanted to query a record in your Database? Using a SQL statement in your script, you can query a record . Here's an example: (LQPP)">ORM query</a>. You&#039;ll see an error like this one below stating that there was no data returned.
</p>
<pre class="code-container-combo code-container-html-combo" data-download-link="true" data-src="file.html">
<code class="language-html code-combo code-html-combo">/vendor/twig/twig/src/Extension/DebugExtension.php:59:
array (size=0)
  empty</code>
</pre>

<p>
<strong>So how do we resolve this?</strong>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Troubleshooting ORM returning null&quot;,&quot;hid&quot;:&quot;troubleshooting_orm_returning_null&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-352&quot;} -->
<h2 class="sectionedit2 heading-combo" id="step_1">Step 1</h2>
<div class="level2">

<p>
Check the terminal for any queries or output for <strong>errors</strong>.
</p>
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;secid&quot;:3,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_center wrap_info plugin_wrap">
<p>
You will put the output in this directory:
<strong>src/templates/import/matchimport.twig</strong>
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;secid&quot;:4,&quot;range&quot;:&quot;0-&quot;} -->
<p>
And it should look something like this: 
</p>
<pre class="command-line code-container-combo code-container-bash-combo" data-prompt="#" data-download-link="true" data-src="file.bash">
<code class="language-bash code-combo code-bash-combo">[Thu Mar 25 16:25:19 2021] INFO:Adding DBA
[Thu Mar 25 16:25:19 2021] DEBUG:SQL:
select  *
from    match t</code>
</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Step 1&quot;,&quot;hid&quot;:&quot;step_1&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;353-716&quot;} -->
<h2 class="sectionedit5 heading-combo" id="step_2">Step 2</h2>
<div class="level2">

<p>
If your ORM query returns no data try running the query using a database client like <a class="link-external link-combo" href="https://github.com/dbeaver/dbeaver/wiki" rel="nofollow ugc">DB-Beaver</a> or <a class="link-external link-combo" href="https://www.phpmyadmin.net/" rel="nofollow ugc">PhpMyAdmin</a>.
</p>
<pre class="code-container-combo" data-download-link="true" data-src="file.txt">
<code class="language-txt code-combo">select &quot;*&quot;
from &quot;id t&quot;
where &quot;id t = user&quot;;</code>
</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Step 2&quot;,&quot;hid&quot;:&quot;step_2&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:5,&quot;range&quot;:&quot;717-982&quot;} -->
<h2 class="sectionedit6 heading-combo" id="step_3">Step 3</h2>
<div class="level2">

<p>
Retrace your steps.
</p>

<p>
To get data from an <a class="link-internal low-quality-page-combo link-combo" data-wiki-id="tina4:tutorials:advanced:save-a-record-with-orm" href="/doku.php?id=tina4:tutorials:advanced:save-a-record-with-orm" title="The &lt;https://en.wikipedia.org/wiki/Object-relational_mapping&gt; in Tina4 tries to be as light as possible on coding, the basic form uses the object name to map to the table and assumes the first public variable you declare is the primary key. It is required to extend the \Tina4\ORM (LQPP)">ORM object</a> you need the following files:
</p>

<p>
<strong>Define an ORM Class (Model)</strong>
</p>
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;secid&quot;:7,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_center wrap_info plugin_wrap">
<p>
The directory should be something like:
<strong>./src/orm/Match.php</strong>
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;secid&quot;:8,&quot;range&quot;:&quot;0-&quot;} -->
<pre class="code-container-combo code-container-php-combo" data-download-link="true" data-src="Match.php" data-download-link-label="Download Match.php">
<code class="language-php code-combo code-php-combo">&lt;?php

class Match extends \Tina4\ORM
{
    public $tableName=&quot;match&quot;;
    public $primaryKey=&quot;match_key&quot;; //set for primary key
}</code>
</pre>

<p>
<strong>a Template file (View)</strong>
</p>
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;secid&quot;:9,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_center wrap_info plugin_wrap">
<p>
The directory should be something like:
<strong>./src/orm/Match.php</strong>
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;secid&quot;:10,&quot;range&quot;:&quot;0-&quot;} --><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;secid&quot;:11,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_center wrap_info plugin_wrap">
<p>
Our twig template located in the project and looks similar to:
<strong>./src/templates/match.twig</strong>
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;secid&quot;:12,&quot;range&quot;:&quot;0-&quot;} -->
<pre class="code-container-combo code-container-twig-combo" data-download-link="true" data-src="match.twig" data-download-link-label="Download match.twig">
<code class="language-twig code-combo code-twig-combo">{% set match = Tina4.call(&quot;MatchHelper&quot;,&quot;getMatch&quot;,[request.id]) %}
{{ dump(match) }}</code>
</pre>

<p>
<strong>Controller</strong>
</p>
<pre class="code-container-combo code-container-php-combo" data-download-link="true" data-src="MatchHelper.php" data-download-link-label="Download MatchHelper.php">
<code class="language-php code-combo code-php-combo">&lt;?php
// if you want your class to extend to a different Helper or Database
class MatchHelper extends \Tina4\Data 
{
  public function getMatch($id) //no data yet
    {
        $match=(new OldMatch())-&gt;select(&quot;*&quot;,1,0)
                               -&gt;where(&quot;match_key = {$id}&quot;)
                               -&gt;asArray();                        
    return $match;
    }
}</code>
</pre>

<p>
<strong>Route (optional)</strong>
A <strong>Route</strong> is preferable but Tina4 will read your template file by name in the absence of a route matching your url query.
</p>
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;secid&quot;:13,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_tip wrap_center plugin_wrap">
<p>
<a href="http://localhost:8383/match.php" class="urlextern" title="http://localhost:8383/match.php" rel="ugc nofollow">http://localhost:8383/match.php</a> should reach your template file if it&#039;s located in the templates directory (not a subdirectory of it).
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;secid&quot;:14,&quot;range&quot;:&quot;0-&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Step 3&quot;,&quot;hid&quot;:&quot;step_3&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:6,&quot;range&quot;:&quot;983-2514&quot;} -->
<h2 class="sectionedit15 heading-combo" id="step_4">Step 4</h2>
<div class="level2">

<p>
Consider reserved words. In the case above <strong>match</strong> is a <a class="link-external link-combo" href="https://dev.mysql.com/doc/refman/8.0/en/keywords.html" rel="nofollow ugc">reseved word in MySQL</a>
</p>
<!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_start&quot;,&quot;secid&quot;:16,&quot;range&quot;:&quot;0-&quot;} --><div class="wrap_center wrap_round wrap_important plugin_wrap">
<p>
Avoid Reserved words. If you inherit a database with tables that have reserved words for names you should change the names of those tables. In the case tthat you add a Reserved Word, for example the word name, then ensure to use back-ticks before and after the word e.g. <strong>`name`</strong>. 
</p>
</div><!-- EDIT{&quot;target&quot;:&quot;plugin_wrap_end&quot;,&quot;secid&quot;:17,&quot;range&quot;:&quot;0-&quot;} -->
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Step 4&quot;,&quot;hid&quot;:&quot;step_4&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:15,&quot;range&quot;:&quot;2515-2995&quot;} -->
<h3 class="sectionedit18 heading-combo" id="as_a_short_term_workaround">As a short term workaround</h3>
<div class="level3">

<p>
You can use tildes around the table name using the fetch method:
</p>
<pre class="code-container-combo code-container-php-combo" data-download-link="true" data-src="file.php">
<code class="language-php code-combo code-php-combo">$match=$this-&gt;DBA-&gt;fetch(&quot;select * from `match`&quot;)
                 -&gt;asArray();</code>
</pre>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;As a short term workaround&quot;,&quot;hid&quot;:&quot;as_a_short_term_workaround&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:18,&quot;range&quot;:&quot;2996-&quot;} -->
<script src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" integrity="sha256-LGOWMG4g6/zc0chji4hZP1d8RxR2bPvXMzl/7oPZqjs=" crossorigin="anonymous" class="snippet-anchor-combo"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0//components/prism-core.min.js" class="snippet-prism-combo"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0//plugins/toolbar/prism-toolbar.min.js" class="snippet-prism-combo"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0//plugins/normalize-whitespace/prism-normalize-whitespace.min.js" class="snippet-prism-combo"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0//plugins/show-language/prism-show-language.min.js" class="snippet-prism-combo"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0//plugins/command-line/prism-command-line.min.js" class="snippet-prism-combo"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0//plugins/line-numbers/prism-line-numbers.min.js" class="snippet-prism-combo"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0//plugins/download-button/prism-download-button.min.js" integrity="sha512-rGJwSZEEYPBQjqYxrdg6Ug/6i763XQogKx+N/GF1rCGvfmhIlIUFxCjc4FmEdCu5dvovqxHsoe3IPMKP+KlgNQ==" crossorigin="anonymous" class="snippet-prism-combo"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0//plugins/autoloader/prism-autoloader.min.js" class="snippet-prism-autoloader-combo"></script>

<script class="snippet-popover-combo">window.addEventListener('load', function () {
    let namespace = "-bs"
    let version = 5;
    if (typeof jQuery != 'undefined' && typeof jQuery.fn.tooltip.constructor.VERSION !== 'undefined') {
        version = parseInt(jQuery.fn.tooltip.constructor.VERSION.substr(0, 1), 10);
        if (version < 5) {
            namespace = "";
        }
        jQuery(`[data${namespace}-toggle="popover"]`).popover();
    } else if (typeof bootstrap.Popover.VERSION !== 'undefined') {
        version = parseInt(bootstrap.Popover.VERSION.substr(0, 1), 10);
        if (version < 5) {
            namespace = "";
        }
        document.querySelectorAll(`[data${namespace}-toggle="popover"]`)
            .forEach(el => {
                new bootstrap.Popover(el);
                // to not navigate on a anchor
                el.onclick = (event => event.preventDefault());
            });
    }
});
</script>

<script class="snippet-anchor-combo">document.addEventListener('DOMContentLoaded', (event) => {
    anchors.options = {
        placement: 'right',
        icon: '#',
        class: 'anchor-combo'
    };
    anchors.add("main > h2").add("main > h3").add("main > h4").add("main > h5").add("main > h6");
});
</script>

<script class="snippet-prism-combo">document.addEventListener('DOMContentLoaded', (event) => {

    if (typeof self === 'undefined' || !self.Prism || !self.document) {
        return;
    }

    // Loading the css from https://cdnjs.com/libraries/prism
    const head = document.querySelector('head');
    const baseCdn = "https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/";
    const stylesheets = [
        ["themes/prism-tomorrow.min.css", "sha512-vswe+cgvic/XBoF1OcM/TeJ2FW0OofqAVdCZiEYkd6dwGXthvkSFWOoGGJgS2CW70VK5dQM5Oh+7ne47s74VTg=="],
        ["plugins/toolbar/prism-toolbar.min.css","sha512-DSAA0ziYwggOJ3QyWFZhIaU8bSwQLyfnyIrmShRLBdJMtiYKT7Ju35ujBCZ6ApK3HURt34p2xNo+KX9ebQNEPQ=="],
        /*https://prismjs.com/plugins/command-line/*/
        ["plugins/command-line/prism-command-line.min.css","sha512-4Y1uID1tEWeqDdbb7452znwjRVwseCy9kK9BNA7Sv4PlMroQzYRznkoWTfRURSADM/SbfZSbv/iW5sNpzSbsYg=="],
        /*https://prismjs.com/plugins/line-numbers/*/
        ["plugins/line-numbers/prism-line-numbers.min.css","sha512-cbQXwDFK7lj2Fqfkuxbo5iD1dSbLlJGXGpfTDqbggqjHJeyzx88I3rfwjS38WJag/ihH7lzuGlGHpDBymLirZQ=="]
    ];

    stylesheets.forEach(stylesheet => {
            let link = document.createElement('link');
            link.rel="stylesheet"
            link.href=baseCdn+"/"+stylesheet[0];
            link.integrity=stylesheet[1];
            link.crossOrigin="anonymous";
            head.append(link);
        }
    )


    Prism.plugins.NormalizeWhitespace.setDefaults({
        'remove-trailing': true,
        'remove-indent': true,
        'left-trim': true,
        'right-trim': true,
    });

    if (!Prism.plugins.toolbar) {
        console.warn('Copy to Clipboard plugin loaded before Toolbar plugin.');

        return;
    }

    let ClipboardJS = window.ClipboardJS || undefined;

    if (!ClipboardJS && typeof require === 'function') {
        ClipboardJS = require('clipboard');
    }

    const callbacks = [];

    if (!ClipboardJS) {
        const script = document.createElement('script');
        const head = document.querySelector('head');

        script.onload = function() {
            ClipboardJS = window.ClipboardJS;

            if (ClipboardJS) {
                while (callbacks.length) {
                    callbacks.pop()();
                }
            }
        };

        script.src = 'https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js';
        head.appendChild(script);
    }

    Prism.plugins.toolbar.registerButton('copy-to-clipboard', function (env) {
        var linkCopy = document.createElement('button');
        linkCopy.textContent = 'Copy';
        linkCopy.setAttribute('type', 'button');

        var element = env.element;

        if (!ClipboardJS) {
            callbacks.push(registerClipboard);
        } else {
            registerClipboard();
        }

        return linkCopy;

        function registerClipboard() {
            var clip = new ClipboardJS(linkCopy, {
                'text': function () {
                    return element.textContent;
                }
            });

            clip.on('success', function() {
                linkCopy.textContent = 'Copied!';

                resetText();
            });
            clip.on('error', function () {
                linkCopy.textContent = 'Press Ctrl+C to copy';

                resetText();
            });
        }

        function resetText() {
            setTimeout(function () {
                linkCopy.textContent = 'Copy';
            }, 5000);
        }
    });

});</script>

<style class="snippet-historical-breadcrumb-combo">.historical-breadcrumb li {
    margin-bottom: 0.5rem;
}
.historical-breadcrumb a {
    text-decoration: none;
}
.historical-breadcrumb-home {
    max-width: fit-content;
    display: block;
    margin-right: auto;
    margin-left: auto;
    margin-bottom: 1rem;
    padding:0.5rem;
    text-align: center;
    border-radius: calc(.3rem - 1px);
    background-color: #f0f0f0;
}
.historical-breadcrumb-home::before {
    content:'Actual: '
}
</style>

<style class="snippet-message-combo">/*Message*/
.combo-message > .signature {
    font-size: 80%;
    font-style: italic;
    text-align: right;
}
</style>

<style class="snippet-lqpp-combo">.low-quality-page-combo {
    text-decoration: none;
}
</style>

<style class="snippet-link-combo">
a.link-external:not(.btn) {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAABdklEQVR4AWMgAVRo1zY3rGk41rC+rqvCBCJWBpPM4WoomLHtdtuv/t9Lfk263TtrQ0t7Oj9cbzZDc/W6s/8T7khD+P+F/8bv29PZlswJVVBu0vPuVZyNYHFZbmAqE1SR0cbjXR6pjGBO58am962Ta3e3ftqy6B5LCcMasOj7gInrm9jBzI4vTX+bfjT/7/4/p/w/zFXybUmt71u4wJzGfxP/t/xvA+KaP2XnQSKVFpWPav/U/6+HKJjz++OVJUDp1n9N/+r+19QyMCz1mPC/8X/X/26Igrn3GiUeL5n/v+F/8//6/9NOMTC0hDUDefP/L4MoOL6ickVeSQ1QqAGooPdBJE/lnloge/fhixBHftFd9bLkR83/+n/1QAXVP8qX1Pyv/L/s/12f/4xQNz8s3Pa/6X/Vvzqgour/5f/r/q//f2fmLy54WP7lfJN74eMSoKIyoNFz/5/+9ar+Px9aZL3Xfjvz7aO3/96+eLvsnSVE7CPhOAYA9nvIX0UoNU8AAAAASUVORK5CYII=);
    background-repeat: no-repeat;
    background-position: 0 center;
    padding: 0 0 0 18px;
}

a.link-mail:not(.btn) {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAABOUlEQVR4AaXJMWoUUQDG8f/33ltldyZB3E2xaCAxIQREFKwD2lhb6QmsxMIL6BlU8AhCjmBADdqlWLyACKZKF7LZmUzmzXwiSMTKwl/7478Jng9OXa5fviRzwTS5/j40OcHo2fSofH10tUcXHVg9q54cj3kleOnRj/uHh3e+FVgCbK2drX/dn5xuogAD8uqnyfXZRi3J+tXN2uxj2WwkEgFw0vnW3srmwbU2K2uat2fvi/ObSbII0Kl3VL+9O975PPXEOwe7sb8dZXfqSGB6YWm89Wb+dF+jt+3K3ZoeYUDwwgOjK14wV7tHNXhYUvgEqzUhQeegZVcsSOYBRFeCIXN3ggBoiYYTJBOJIHmhhiWEEHzwl3ycIhjxm5y1nO8FYoJbj268A0D8ISAWj0HQyEOE+Zuwasy//ATU93+97E8p8AAAAABJRU5ErkJggg==);
    background-repeat: no-repeat;
    background-position: 0 center;
    padding: 0 0 0 18px;
}

</style>

<style class="snippet-prism-combo">/* no margin at the bottom / to close to the next paragraph */
.code-toolbar { margin-bottom: 1rem }
</style>
