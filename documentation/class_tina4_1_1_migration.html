<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Tina4 - This is not a framework: Tina4\Migration Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Tina4.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Tina4 - This is not a framework
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_tina4.html">Tina4</a></li><li class="navelem"><a class="el" href="class_tina4_1_1_migration.html">Migration</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="class_tina4_1_1_migration-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Tina4\Migration Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for Tina4\Migration:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_tina4_1_1_migration.png" usemap="#Tina4_5CMigration_map" alt=""/>
  <map id="Tina4_5CMigration_map" name="Tina4_5CMigration_map">
<area href="class_tina4_1_1_data.html" alt="Tina4\Data" shape="rect" coords="0,0,100,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:afd2d49fa6d63187b8e107995ae9d1a9c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tina4_1_1_migration.html#afd2d49fa6d63187b8e107995ae9d1a9c">__construct</a> ($migrationPath=&quot;./migrations&quot;, $delim=&quot;;&quot;)</td></tr>
<tr class="separator:afd2d49fa6d63187b8e107995ae9d1a9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0fd9eec57f2db6ec3b3651c079398de"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tina4_1_1_migration.html#ac0fd9eec57f2db6ec3b3651c079398de">doMigration</a> ()</td></tr>
<tr class="separator:ac0fd9eec57f2db6ec3b3651c079398de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78a0173854b55612aaf0d4ba6336cb69"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tina4_1_1_migration.html#a78a0173854b55612aaf0d4ba6336cb69">createMigration</a> ($description, $content)</td></tr>
<tr class="separator:a78a0173854b55612aaf0d4ba6336cb69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_tina4_1_1_data"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_tina4_1_1_data')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_tina4_1_1_data.html">Tina4\Data</a></td></tr>
<tr class="memitem:a446dc78420c0b4fb60182961622e91e4 inherit pub_methods_class_tina4_1_1_data"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tina4_1_1_data.html#a446dc78420c0b4fb60182961622e91e4">__construct</a> ()</td></tr>
<tr class="separator:a446dc78420c0b4fb60182961622e91e4 inherit pub_methods_class_tina4_1_1_data"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ae3eb19643257f437fae4ad2811eb8361"><td class="memItemLeft" align="right" valign="top"><a id="ae3eb19643257f437fae4ad2811eb8361"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$DBA</b> = null</td></tr>
<tr class="separator:ae3eb19643257f437fae4ad2811eb8361"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_attribs_class_tina4_1_1_data"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_class_tina4_1_1_data')"><img src="closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="class_tina4_1_1_data.html">Tina4\Data</a></td></tr>
<tr class="memitem:a891b842afa4294e1b6c632752403c2a8 inherit pub_attribs_class_tina4_1_1_data"><td class="memItemLeft" align="right" valign="top"><a id="a891b842afa4294e1b6c632752403c2a8"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$DBA</b></td></tr>
<tr class="separator:a891b842afa4294e1b6c632752403c2a8 inherit pub_attribs_class_tina4_1_1_data"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ee9db5502acea5a0ed5fe0c3b9be730 inherit pub_attribs_class_tina4_1_1_data"><td class="memItemLeft" align="right" valign="top"><a id="a7ee9db5502acea5a0ed5fe0c3b9be730"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$cache</b></td></tr>
<tr class="separator:a7ee9db5502acea5a0ed5fe0c3b9be730 inherit pub_attribs_class_tina4_1_1_data"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac77215508cbd9a4a1ce10cde5b7c3db5 inherit pub_attribs_class_tina4_1_1_data"><td class="memItemLeft" align="right" valign="top"><a id="ac77215508cbd9a4a1ce10cde5b7c3db5"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$rootFolder</b></td></tr>
<tr class="separator:ac77215508cbd9a4a1ce10cde5b7c3db5 inherit pub_attribs_class_tina4_1_1_data"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Description of <a class="el" href="namespace_tina4.html">Tina4</a> <a class="el" href="class_tina4_1_1_migration.html">Migration</a> There are some "rules" that <a class="el" href="namespace_tina4.html">Tina4</a> prescribes for the migrations and it would be in your best interests to follow them. 1.) File formats are in the following format: YYYYMMDDHHMMSS Description of migration followed by dot sql Example: 01012015101525 The first migration.sql 2.) Do not put commit statements in the <a class="el" href="class_tina4_1_1_s_q_l.html">SQL</a>, this will make it impossible for a migration to fail or roll back. Instead make more files. A create table statement would be in its own file. 3.) Stored procedures, triggers and views should be in their own files, they are run as individual statements and are commited so, delimter is not needed on the end of these. You do not need to change the delimiter either before running these statements. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="afd2d49fa6d63187b8e107995ae9d1a9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd2d49fa6d63187b8e107995ae9d1a9c">&#9670;&nbsp;</a></span>__construct()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Tina4\Migration::__construct </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$migrationPath</em> = <code>&quot;./migrations&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$delim</em> = <code>&quot;;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor for Migrations The path is relative to your web folder.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">String</td><td class="paramname">$migrationPath</td><td>relative path to your web folder </td></tr>
    <tr><td class="paramtype">String</td><td class="paramname">$delim</td><td>A delimiter to say how your <a class="el" href="class_tina4_1_1_s_q_l.html">SQL</a> is run </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a78a0173854b55612aaf0d4ba6336cb69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78a0173854b55612aaf0d4ba6336cb69">&#9670;&nbsp;</a></span>createMigration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Tina4\Migration::createMigration </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$description</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$content</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$description</td><td></td></tr>
    <tr><td class="paramname">$content</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string </dd></dl>

</div>
</div>
<a id="ac0fd9eec57f2db6ec3b3651c079398de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0fd9eec57f2db6ec3b3651c079398de">&#9670;&nbsp;</a></span>doMigration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Tina4\Migration::doMigration </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Do <a class="el" href="class_tina4_1_1_migration.html">Migration</a></p>
<p>Do <a class="el" href="class_tina4_1_1_migration.html">Migration</a> finds the last possible migration based on what is read from the database on the constructor It then opens the migration file, imports it into the database and tries to run each statement. The migration files must run in sequence and migrations will stop if it hits an error!</p>
<p>DO NOT USE COMMIT STATEMENTS IN YOUR MIGRATIONS , RATHER BREAK THINGS UP INTO SMALLER LOGICAL PIECES </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Tina4/Migration.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
